<Window x:Class="PaperTrail.App.LandingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:PaperTrail.App.Views"
        Title="PaperTrail Contract Tracker" Height="500" Width="800">
    <Grid>
        <Grid x:Name="LandingGrid" Margin="10">
            <Grid.Style>
                <Style TargetType="Grid">
                    <Setter Property="Visibility" Value="Visible"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsMainViewVisible}" Value="True">
                            <Setter Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Grid.Style>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <GroupBox Header="Previous Contracts" Grid.Row="0" Margin="0,0,0,10">
                <DataGrid ItemsSource="{Binding PreviousContracts}"
                          SelectedItem="{Binding SelectedPreviousContract}"
                          AutoGenerateColumns="False"
                          MouseDoubleClick="PreviousContracts_DoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*"/>
                        <DataGridTextColumn Header="Counterparty" Binding="{Binding Counterparty.Name}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>

            <GroupBox Header="Imported Contracts" Grid.Row="1">
                <DataGrid ItemsSource="{Binding ImportedContracts}"
                          SelectedItem="{Binding SelectedImportedContract}"
                          AutoGenerateColumns="False"
                          MouseDoubleClick="ImportedContracts_DoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*"/>
                        <DataGridTextColumn Header="Counterparty" Binding="{Binding Counterparty.Name}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>

            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                <Button Content="Manage Contracts"
                        Command="{Binding OpenMainCommand}"
                        Width="150" Margin="0,0,10,0"/>
                <Button Content="Settings" Command="{Binding OpenSettingsCommand}" Width="150"/>
            </StackPanel>
        </Grid>

        <Grid x:Name="MainGrid" DataContext="{Binding Main}">
            <Grid.Style>
                <Style TargetType="Grid">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding DataContext.IsMainViewVisible, RelativeSource={RelativeSource AncestorType=Window}}" Value="True">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Grid.Style>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Menu>
                <MenuItem Header="_File">
                    <MenuItem Header="_Settings" Command="{Binding OpenSettingsCommand}" />
                </MenuItem>
            </Menu>
            <ToolBar Grid.Row="1" DataContext="{Binding Contracts}">
                <Button Content="New Contract" Command="{Binding NewCommand}" />
                <Button Content="Import PDF" Command="{Binding ImportCommand}" />
                <Button Content="Export CSV" Command="{Binding ExportCommand}" />
                <TextBox Width="200" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" />
                <Button Content="Search" Command="{Binding RefreshCommand}" />
            </ToolBar>
            <views:ContractListView Grid.Row="2" DataContext="{Binding Contracts}" />
        </Grid>
    </Grid>
</Window>
